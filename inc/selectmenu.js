var smListPool={},itemSepRE=/\s*,\s*/,rangeSepRE=/\s*:\s*/;function smTrimIt(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function smGetItems(e){var a=new Array();var c=smTrimIt(e).split(itemSepRE);for(var f=0;f<c.length;f++){if(c[f].indexOf(":")==-1){a[a.length]=c[f]}else{var b=c[f].split(rangeSepRE);for(var d=parseInt(b[0],10);d<=parseInt(b[1],10);d++){a[a.length]=d}}}return a}function smListOBJ(d,c,b,a){this.id=d;this.non_item_tag=c;this.sub_tag=b;this.back_tag=a;this.list=null;this.top_idx=0;this.top_list=[];this.item_pool={};this.path={}}function smOptionItemOBJ(d,a,b,c){this.type="I";this.id=d;this.num=a;this.value=b;this.desc=c}function smSubListItemOBJ(e,c,a,d,b){this.type="M";this.id=e;this.num=c;this.idx=a;this.desc=d;this.item_pool=smGetItems(b)}function smEmptyList(c){var b=smListPool[c].list;for(var a=b.options.length-1;a>=0;a--){b.options[a]=null}}function smUpdateList(){var d=this.list,c=smListPool[d],b=this.value;if(b==c.back_tag){smEmptyList(d);smSetTopList(d,-1)}else{if(b.substring(0,c.sub_tag.length)==c.sub_tag){var a=b.substring(c.sub_tag.length+1);smEmptyList(d);smSetSubList(d,a)}else{smSetCookie(d+"-idx",this.selectedIndex)}}}function optionOBJ(b,a){this.text=b;this.value=a}function smSetList(d,a,c){for(var b=0;b<a.length;b++){d.options[b]=new Option(a[b].text,a[b].value);d.options[b].title=a[b].text}if(c>=0){d.selectedIndex=c}}function smGetList(f,b){var c=smListPool[f],a=new Array(),e=c.top_list;if(b!=""&&c.item_pool[b]&&c.item_pool[b].type=="M"){e=c.item_pool[b].item_pool}for(i=0;i<e.length;i++){var d=c.item_pool[e[i]];if(d){if(d.type=="I"){a[i]=new optionOBJ(d.desc,d.value)}else{a[i]=new optionOBJ(d.desc,c.sub_tag+":"+d.num)}}}return a}function smSetTopList(f,e){var c=smListPool[f],b=smGetList(f,"");if(e==-1){smSetList(c.list,b,-1);smSetCookie(f+"-type","");smSetCookie(f+"-idx","")}else{var d=smGetCookie(f+"-type"),a=smGetCookie(f+"-idx");if(e==0&&d!=""&&a!=""){b=smGetList(f,d);smSetList(c.list,b,parseInt(a,10));return}smSetList(c.list,b,c.top_idx);smSetCookie(f+"-type","top");smSetCookie(f+"-idx",c.top_idx)}}function smSetSubList(d,c){var b=smListPool[d],a=smGetList(d,c);smSetList(b.list,a,b.item_pool[c].idx);smSetCookie(d+"-type",c);smSetCookie(d+"-idx",b.item_pool[c].idx)}function _setCookie(a,b){document.cookie=a+"="+b}function smSetCookie(a,b){setTimeout("_setCookie('"+a+"','"+b+"')",0)}function smGetCookie(a){var b=new RegExp(a+"=([^;]+)");if(document.cookie.search(b)!=-1){return RegExp.$1}else{return""}}function addList(d,c,b,a){smListPool[d+""]=new smListOBJ(d+"",c,b,a)}function addItem(d,a,b,c){if(smListPool[d+""]){smListPool[d+""].item_pool[a+""]=new smOptionItemOBJ(d+"",a+"",b,c||b)}}function addSubList(e,c,a,d,b){if(smListPool[e+""]){smListPool[e+""].item_pool[c+""]=new smSubListItemOBJ(e+"",c+"",a-1,d,b)}}function addTopList(c,a,b){if(smListPool[c+""]){smListPool[c+""].top_idx=a-1;smListPool[c+""].top_list=smGetItems(b)}}function initList(b,a){if(smListPool[b+""]&&a){smListPool[b+""].list=a;a.list=b+"";a.onchange=smUpdateList;smEmptyList(b+"");smSetTopList(b+"",0)}}function resetList(a){smEmptyList(a+"");smSetTopList(a+"",1)}function checkList(c){var b=smListPool[c+""],a=b.list.value;return(a!=b.back_tag&&a!=b.non_item_tag&&a.substring(0,b.sub_tag.length)!=b.sub_tag)};